(this["webpackJsonpreact-typescript-starter-pack"]=this["webpackJsonpreact-typescript-starter-pack"]||[]).push([[0],{27:function(e,t,n){},32:function(e,t,n){"use strict";n.r(t);var c,r=n(15),a=(n(25),n(26),n(27),n(16)),o=n(2),s=n.n(o),i=n(5),u=n(3),l=n(1),d=n.n(l),p=n(4),b=n.n(p);!function(e){e.ALL="All",e.ACTIVE="Active",e.COMPLETED="Completed"}(c||(c={}));var f=[{title:c.ALL,url:""},{title:c.ACTIVE,url:"active"},{title:c.COMPLETED,url:"completed"}],j=n(0),m=d.a.memo((function(e){var t=e.filter,n=e.onFilterChange,c=e.completedTodos,r=e.activeTodosCount,a=e.deleteCompleted;return Object(j.jsxs)("footer",{className:"todoapp__footer",children:[Object(j.jsx)("span",{className:"todo-count",children:"".concat(r," items left")}),Object(j.jsx)("nav",{className:"filter",children:f.map((function(e){return Object(j.jsx)("button",{className:"todoapp__footer__button",type:"button",onClick:function(){return n(e.title)},children:Object(j.jsx)("a",{href:"#/".concat(e.url),className:b()("filter__link",{selected:t===e.title}),children:e.title})},e.title)}))}),Object(j.jsx)("button",{type:"button",className:"todoapp__clear-completed",disabled:!c.length,onClick:function(){return a(c)},children:"Clear completed"})]})})),h=n(35),O=n(34),v=d.a.memo((function(e){var t=e.todo,n=e.onDelete,c=e.isProcessing,r=e.updateTodo,a=e.onChangeTitle,o=t.title,s=t.id,i=t.completed,d=Object(l.useState)(!1),p=Object(u.a)(d,2),f=p[0],m=p[1],h=Object(l.useState)(o),O=Object(u.a)(h,2),v=O[0],x=O[1],T=Object(l.useRef)(null),g=v!==o;Object(l.useEffect)((function(){T.current&&T.current.focus()}),[f]);var k=function(){if(m(!1),g){if(!v.trim())return void n(s);a(s,v)}};return Object(j.jsxs)("div",{className:b()("todo",{completed:i}),children:[Object(j.jsx)("label",{className:"todo__status-label",children:Object(j.jsx)("input",{type:"checkbox",className:"todo__status",checked:i,onChange:function(e){return r([s],e.target.checked)}})}),f?Object(j.jsx)("form",{onSubmit:function(e){e.preventDefault(),k()},children:Object(j.jsx)("input",{ref:T,type:"text",className:"todo__title-field",placeholder:"Empty todo will be deleted",value:v,onKeyUp:function(e){"Escape"===e.key&&m(!1)},onBlur:k,onChange:function(e){var t=e.target;return x(t.value)}})}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("span",{className:"todo__title",onDoubleClick:function(){return m(!0)},children:o}),Object(j.jsx)("button",{type:"button",className:"todo__remove",onClick:function(){return n(s)},children:"\xd7"})]}),Object(j.jsxs)("div",{className:b()("modal overlay",{"is-active":c}),children:[Object(j.jsx)("div",{className:"modal-background has-background-white-ter"}),Object(j.jsx)("div",{className:"loader"})]})]},s)})),x=d.a.memo((function(e){var t=e.todos,n=e.creating,c=e.onDelete,r=e.inProcessing,a=e.updateTodo,o=e.onChangeTitle;return Object(j.jsx)("section",{className:"todoapp__main","data-cy":"TodoList",children:Object(j.jsxs)(h.a,{children:[t.map((function(e){return Object(j.jsx)(O.a,{timeout:300,classNames:"item",children:Object(j.jsx)(v,{todo:e,onDelete:c,isProcessing:r.includes(e.id),updateTodo:a,onChangeTitle:o})},e.id)})),n&&Object(j.jsx)(O.a,{timeout:300,classNames:"temp-item",children:Object(j.jsx)(v,{todo:n,onDelete:c,updateTodo:a,isProcessing:!0,onChangeTitle:o})},0)]})})})),T=d.a.memo((function(e){var t=e.error,n=e.errorNotice,c=e.closeErrorNotice;return Object(j.jsxs)("div",{className:b()("notification is-danger is-light has-text-weight-normal",{hidden:!t}),children:[Object(j.jsx)("button",{"aria-label":"btn",type:"button",className:"delete",onClick:function(){return c("")}}),n]})})),g=d.a.memo((function(e){var t=e.title,n=e.handleSubmit,c=e.createNewTitle,r=e.completedTodos,a=e.activeTodos,o=e.updateTodos,s=e.isDisableInput;return Object(j.jsxs)("header",{className:"todoapp__header",children:[Object(j.jsx)("button",{"aria-label":"Toggle All Todos",type:"button",className:b()("todoapp__toggle-all",{active:!a.length}),onClick:function(){a.length?o(a.map((function(e){return e.id})),!0):o(r.map((function(e){return e.id})),!1)}}),Object(j.jsx)("form",{onSubmit:n,children:Object(j.jsx)("input",{type:"text",className:"todoapp__new-todo",placeholder:"What needs to be done?",disabled:s,value:t,onChange:function(e){var t=e.target;return c(t.value)}})})]})}));function k(e){var t,n=arguments.length>2?arguments[2]:void 0,c={method:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET"};return n&&(c.body=JSON.stringify(n),c.headers={"Content-Type":"application/json; charset=UTF-8"}),(t=300,new Promise((function(e){setTimeout(e,t)}))).then((function(){return fetch("https://mate.academy/students-api"+e,c)})).then((function(e){if(!e.ok)throw new Error;return e.json()}))}var C,E=function(e){return k(e)},N=function(e,t){return k(e,"POST",t)},_=function(e,t){return k(e,"PATCH",t)},y=function(e){return k(e,"DELETE")},D=function(e){return y("/todos/".concat(e))},w=function(e,t){return _("/todos/".concat(e),{completed:t})},L=function(e,t){return _("/todos/".concat(e),{title:t})};!function(e){e.LOADING="Unable loading data",e.ADD="Unable to add a todo",e.DELETE="Unable to delete a todo",e.UPDATE="Unable to update a todo",e.TITLE="Title can't be empty"}(C||(C={}));var A=6762,P=function(){var e=Object(l.useState)([]),t=Object(u.a)(e,2),n=t[0],r=t[1],o=Object(l.useState)(""),d=Object(u.a)(o,2),p=d[0],b=d[1],f=Object(l.useState)(c.ALL),h=Object(u.a)(f,2),O=h[0],v=h[1],k=Object(l.useState)(""),_=Object(u.a)(k,2),y=_[0],P=_[1],S=Object(l.useState)(null),I=Object(u.a)(S,2),U=I[0],M=I[1],F=Object(l.useState)([]),G=Object(u.a)(F,2),J=G[0],V=G[1],B=!!p,R=null!==U,H=function(e){b(e)},K=Object(l.useCallback)(Object(i.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E("/todos?userId=".concat(A));case 3:t=e.sent,r(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),H(C.LOADING);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[A]);Object(l.useEffect)((function(){var e=setTimeout((function(){return b("")}),3e3);return function(){clearTimeout(e)}}),[p]),Object(l.useEffect)((function(){K()}),[]);var W=Object(l.useCallback)(function(){var e=Object(i.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),y.trim()){e.next=4;break}return H(C.TITLE),e.abrupt("return");case 4:return M(n={id:0,userId:A,title:y,completed:!1}),e.prev=6,e.next=9,N("/todos",n);case 9:r((function(e){return[].concat(Object(a.a)(e),[n])})),P(""),M(null),K(),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(6),H(C.ADD),M(null);case 19:case"end":return e.stop()}}),e,null,[[6,15]])})));return function(t){return e.apply(this,arguments)}}(),[y]),q=Object(l.useCallback)(function(){var e=Object(i.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,V([t]),e.next=4,D(t);case 4:K(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),H(C.DELETE);case 10:return e.prev=10,V([]),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,7,10,13]])})));return function(t){return e.apply(this,arguments)}}(),[K]),z=Object(l.useCallback)(function(){var e=Object(i.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,V(t.map((function(e){return e.id}))),n=t.map((function(e){return D(e.id)})),e.next=5,Promise.all(n);case 5:K(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),H(C.DELETE);case 11:return e.prev=11,V([]),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})));return function(t){return e.apply(this,arguments)}}(),[J]),Q=Object(l.useCallback)(function(){var e=Object(i.a)(s.a.mark((function e(t,n){var c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return V(t),e.prev=1,c=t.map((function(e){return w(e,n)})),e.next=5,Promise.all(c);case 5:K(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),H(C.UPDATE);case 11:return e.prev=11,V([]),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])})));return function(t,n){return e.apply(this,arguments)}}(),[]),X=Object(l.useCallback)(function(){var e=Object(i.a)(s.a.mark((function e(t,n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return V([t]),e.prev=1,e.next=4,L(t,n);case 4:K(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),b(C.UPDATE);case 10:return e.prev=10,V([]),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[1,7,10,13]])})));return function(t,n){return e.apply(this,arguments)}}(),[]),Y=Object(l.useMemo)((function(){return function(e,t){switch(t){case c.ACTIVE:return e.filter((function(e){return!e.completed}));case c.COMPLETED:return e.filter((function(e){return e.completed}));default:return e}}(n,O)}),[n,O]),Z=Object(l.useMemo)((function(){return n.filter((function(e){return e.completed}))}),[n,U]),$=Object(l.useMemo)((function(){return n.filter((function(e){return!e.completed}))}),[n]);return Object(j.jsxs)("div",{className:"todoapp",children:[Object(j.jsx)("h1",{className:"todoapp__title",children:"todos"}),Object(j.jsxs)("div",{className:"todoapp__content",children:[Object(j.jsx)(g,{isDisableInput:R,title:y,handleSubmit:W,createNewTitle:P,completedTodos:Z,activeTodos:$,updateTodos:Q}),Object(j.jsx)(x,{todos:Y,creating:U,onDelete:q,inProcessing:J,updateTodo:Q,onChangeTitle:X}),n.length>0&&Object(j.jsx)(m,{filter:O,onFilterChange:v,completedTodos:Z,activeTodosCount:$.length,deleteCompleted:z})]}),Object(j.jsx)(T,{error:B,errorNotice:p,closeErrorNotice:b})]})};Object(r.createRoot)(document.getElementById("root")).render(Object(j.jsx)(P,{}))}},[[32,1,2]]]);
//# sourceMappingURL=main.d1921881.chunk.js.map